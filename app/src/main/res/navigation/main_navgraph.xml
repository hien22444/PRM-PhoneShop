<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_navgraph"
    app:startDestination="@id/cartFragment">

    <!-- Fragment 1: Giỏ hàng -->
    <fragment
        android:id="@+id/cartFragment"
        android:name="com.example.phoneshop.features.feature_cart.CartFragment"
        android:label="fragment_cart"
        tools:layout="@layout/fragment_cart" >
        <action
            android:id="@+id/action_cartFragment_to_checkoutFragment"
            app:destination="@id/checkoutFragment" />
    </fragment>

    <!-- Fragment 2: Thanh toán -->
    <fragment
        android:id="@+id/checkoutFragment"
        android:name="com.example.phoneshop.features.feature_cart.CheckoutFragment"
        android:label="fragment_checkout"
        tools:layout="@layout/fragment_checkout" >
        <action
            android:id="@+id/action_checkoutFragment_to_paymentWebViewFragment"
            app:destination="@id/paymentWebViewFragment" />
    </fragment>

    <!-- Fragment 3: WebView Thanh toán -->
    <fragment
        android:id="@+id/paymentWebViewFragment"
        android:name="com.example.phoneshop.features.feature_cart.PaymentWebViewFragment"
        android:label="fragment_payment_webview"
        tools:layout="@layout/fragment_payment_webview" >
        <action
            android:id="@+id/action_paymentWebViewFragment_to_orderSuccessFragment"
            app:destination="@id/orderSuccessFragment"
            app:popUpTo="@id/checkoutFragment"
            app:popUpToInclusive="true" />
    </fragment>

    <!-- Fragment 4: Thành công -->
    <fragment
        android:id="@+id/orderSuccessFragment"
        android:name="com.example.phoneshop.features.feature_cart.OrderSuccessFragment"
        android:label="fragment_order_success"
        tools:layout="@layout/fragment_order_success" >
        <action
            android:id="@+id/action_orderSuccessFragment_to_orderHistoryFragment"
            app:destination="@id/orderHistoryFragment"
            app:popUpTo="@id/cartFragment"
            app:popUpToInclusive="true" />
        <action
            android:id="@+id/action_orderSuccessFragment_to_homeFragment"
            app:destination="@id/homeFragment"
            app:popUpTo="@id/cartFragment"
            app:popUpToInclusive="true" />
    </fragment>

    <!-- Fragment 5: Lịch sử (Code của bạn đã có) -->
    <fragment
        android:id="@+id/orderHistoryFragment"
        android:name="com.example.phoneshop.features.feature_cart.OrderHistoryFragment"
        android:label="fragment_order_history"
        tools:layout="@layout/fragment_order_history" />

    <!--
      FRAGMENT 6 (BỊ THIẾU)
      Đây là "nơi đến" cho nút "Quay về Trang chủ"
    -->
<!--    <fragment-->
<!--        android:id="@+id/homeFragment"-->
<!--        android:name="com.example.phoneshop.features.feature_shopping.HomeFragment"-->
<!--        android:label="fragment_home"-->
<!--        tools:layout="@layout/fragment_home" />-->

</navigation>